- name: Download Debian 12 cloud image to Proxmox
  hosts: pve
  gather_facts: false
  tasks:
    - name: Ensure images dir exists
      ansible.builtin.file:
        path: /var/lib/vz/template/images
        state: directory
        mode: "0755"

    - name: Download qcow2
      ansible.builtin.get_url:
        url: "{{ debian_cloudimg_url }}"
        dest: "/var/lib/vz/template/images/{{ debian_cloudimg_filename }}"
        mode: "0644"
        force: true
